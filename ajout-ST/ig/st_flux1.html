<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE HTML>
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type"/>
    <title>Flux 1:SouscriptionAbonnement - ANS IG Example v0.1.0</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="author" content="http://hl7.org/fhir"/>

    <link href="fhir.css" rel="stylesheet"/>

    <!-- Bootstrap core CSS -->
    <link href="assets/css/bootstrap-fhir.css" rel="stylesheet"/>

    <!-- Project extras -->
    <link href="assets/css/project.css" rel="stylesheet"/>
    <link href="assets/css/pygments-manni.css" rel="stylesheet"/>
    <link href="assets/css/jquery-ui.css" rel="stylesheet"/>
  	<link href="assets/css/prism.css" rel="stylesheet" />
  	<link href="assets/css/cqf.css" rel="stylesheet" />
    <link rel="stylesheet" href="assets/css/style-ans.css"/>
    <link rel="stylesheet" href="assets/css/style-add-ans.css"/>
    <!-- Placeholder for child template CSS declarations -->

    <script type="text/javascript" src="fhir-table-scripts.js"> </script>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="assets/js/html5shiv.js"></script>
    <script src="assets/js/respond.min.js"></script>
    <![endif]-->

    <!-- Favicons -->
    <link rel="fhir-logo" sizes="144x144" href="assets/ico/icon-fhir-144.png"/>
    <link rel="fhir-logo" sizes="114x114" href="assets/ico/icon-fhir-114.png"/>
    <link rel="fhir-logo" sizes="72x72" href="assets/ico/icon-fhir-72.png"/>
    <link rel="fhir-logo" href="assets/ico/icon-fhir-57.png"/>
    <link rel="shortcut icon" href="assets/ico/favicon.png"/>
  </head>
  <body onload="document.body.style.opacity='1'">

	  <script src="assets/js/prism.js"></script>
    <script type="text/javascript" src="assets/js/mermaid.js"></script>
    <script type="text/javascript" src="assets/js/mermaid-init.js"></script>
    <style type="text/css">h2{--heading-prefix:"3.2"}
    h3,h4,h5,h6{--heading-prefix:"3.2"}</style>
    <div id="segment-header" class="segment">  <!-- segment-header -->
      <div class="container">  <!-- container -->

        <!-- Placeholder for child template header declarations -->
<div id="family-nav">
    <a id="hl7-search-lnk" data-no-external="true" href="http://hl7.org/fhir"><img height="50" alt="Visit the FHIR website" src="assets/images/fhir-logo-www.png"/> </a>
  </div>
  <div id="ans-nav" style="line-height: 50px; float: left; margin-top: 4px; margin-bottom: 8px; color: #808080; ">
    <a id="hl7-logo" data-no-external="true" href="https://esante.gouv.fr/"><img height="50" alt="ANS Logo" src="assets/images/logo-ANS.svg"/></a>
    <a id="hl7-search-lnk" data-no-external="true" href="searchform.html"><img alt="Search FHIR" src="assets/images/search.png"/></a>
  </div>

  <div id="ig-search">
 </div>


        <div id="ig-status">
          <p><span style="font-size:12pt;font-weight:bold">ANS IG Example</span>
            <br/>
            <span style="display:inline-block;">0.1.0 - ci-build



  <span title="">FR</span>


            </span>
          </p>
        </div>
      </div> <!-- /container -->
    </div>  <!-- /segment-header -->

    <div id="segment-navbar" class="segment">  <!-- segment-navbar -->
      <div id="stripe"> </div>
      <div class="container">  <!-- container -->
        <!-- HEADER CONTENT -->

        <nav class="navbar navbar-inverse">
          <!--status-bar-->
          <div class="container">
            <button data-target=".navbar-inverse-collapse" class="navbar-toggle" data-toggle="collapse" type="button">
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
            </button>
            <a class="navbar-brand hidden" href="http://hl7.org/fhir/R4/index.html">FHIR</a>
            <div class="nav-collapse collapse navbar-inverse-collapse">
              <!-- menu.xml  -->

<ul xmlns="http://www.w3.org/1999/xhtml" class="nav navbar-nav">
  <li>
    <a href="index.html">Accueil</a>
  </li>
  <li>
    <a href="index.html">Volume 1 - Etude fonctionnelle</a>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Volume 2 - Détail des transactions
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="st_intro.html">Introduction</a>
      </li>
      <li>
        <a href="st_flux1.html">Souscription Abonnement</a>
      </li>
      <li>
        <a href="st_flux2.html">SuppressionAbonnement</a>
      </li>
      <li>
        <a href="st_flux3.html">EmissionEvenement</a>
      </li>
      <li>
        <a href="st_flux4.html">TransmissionOrdreNotification</a>
      </li>
      <li>
        <a href="st_flux5.html">NotificationEvenement</a>
      </li>
    </ul>
  </li>
  <li>
    <a href="artifacts.html">Ressources de conformité</a>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Autres ressources
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="securite.html">Sécurité</a>
      </li>
      <li>
        <a href="downloads.html">Téléchargements et usage</a>
      </li>
      <li>
        <a target="_blank" href="http://hl7.org/fhir/R4/index.html">Spécifications FHIR </a>
      </li>
      <li>
        <a target="_blank" href="https://esante.gouv.fr/">Site de l&apos;ANS </a>
      </li>
    </ul>
  </li>
  <li>
    <a target="_blank" href="https://interop.esante.gouv.fr/ig/documentation/">Documentation</a>
  </li>
  <li>
    <a href="change-log.html">Historique</a>
  </li>
</ul>
            </div>  <!-- /.nav-collapse -->
          </div>  <!-- /.container -->
        </nav>  <!-- /.navbar -->
      <!-- /HEADER CONTENT -->
      </div>  <!-- /container -->
    </div>  <!-- /segment-navbar -->
    <!--status-bar-->

    <div id="segment-breadcrumb" class="segment">  <!-- segment-breadcrumb -->
      <div class="container">  <!-- container -->
        <ul class="breadcrumb">
          <li><a href='toc.html'><b>Table of Contents</b></a></li><li><a href='specifications_techniques.html'><b>Specifications Techniques</b></a></li><li><b>Flux 1:SouscriptionAbonnement</b></li>

          <span style="float:right;">

            <a href="st_intro.html">&lt;prev</a> | 

            <a href="#bottom">bottom</a>

          | <a href="st_flux2.html">next&gt;</a>

          </span>

        </ul>
      </div>  <!-- /container -->
    </div>  <!-- /segment-breadcrumb -->

    <a name="top"> </a>
    <div id="segment-content" class="segment">  <!-- segment-content -->
      <div class="container">  <!-- container -->
        <div class="row">
          <div class="inner-wrapper">
<style type="text/css">
h2:before{color:silver;counter-increment:section;content:var(--heading-prefix) " ";}
h3:before{color:silver;counter-increment:sub-section;content:var(--heading-prefix) "." counter(sub-section) " ";}
h4:before{color:silver;counter-increment:composite;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) " ";}
h5:before{color:silver;counter-increment:detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) " ";}
h6:before{color:silver;counter-increment:more-detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) "." counter(more-detail)" ";}
</style>
<div class="col-12">
  <!--ReleaseHeader--><p id="publish-box">ANS IG Example - version de développement local (v0.1.0) construite par les outils de publication FHIR (HL7® FHIR® Standard). Voir le <a href='https://interop.esante.gouv.fr/ig/fhir/[code]/history.html'>répertoire des versions publiées</a></p><!--EndReleaseHeader-->
  <h2>Flux 1:SouscriptionAbonnement</h2>
  












    <p><!-- white space is critical inside of capture --></p>
<div class="markdown-toc">
<ul id="markdown-toc">
  <li><a href="#correspondances-entre-objets-métier-et-ressources-du-standard-hl7-fhir" id="markdown-toc-correspondances-entre-objets-métier-et-ressources-du-standard-hl7-fhir">Correspondances entre objets métier et ressources du standard HL7 FHIR</a></li>
  <li><a href="#contenu-fhir-des-flux-structurés" id="markdown-toc-contenu-fhir-des-flux-structurés">Contenu FHIR des flux structurés</a></li>
  <li><a href="#ressource-subscription" id="markdown-toc-ressource-subscription">Ressource « Subscription »</a></li>
  <li><a href="#construction-des-flux" id="markdown-toc-construction-des-flux">Construction des flux</a></li>
</ul>

</div>
<h3 id="correspondances-entre-objets-métier-et-ressources-du-standard-hl7-fhir">Correspondances entre objets métier et ressources du standard HL7 FHIR</h3>

<p>Dans cette section, une mise en correspondance est faite entre les
objets identifiés à l’issue de l’étude métier de la notification
d’évènements [1] et les ressources et éléments du standard HL7 FHIR.</p>

<p>Les sections qui suivent détaillent la mise en correspondance des
informations métier [1] contenues dans les flux de la Table 2 avec les
éléments des ressources[^4] FHIR correspondantes. Pour les attributs qui
ne sont pas définis dans les ressources FHIR, des extensions (marquées
par « <em>extension</em> ») sont définies.</p>

<p>Le <strong>Flux 1 – SouscriptionAbonnement</strong> concerne la création ou la mise à
jour d’un abonnement. Un abonnement porte sur les types d'évènements qui
intéressent l’abonné et qui peuvent faire l’objet d’une notification. Il
est défini par l’identification de l’abonné, le média de
notification[^5] à utiliser, la personne prise en charge associée aux
évènements, le type d’événement donnant lieu à notification et la
période de validité de l’abonnement.</p>

<p>La gestion des droits d’accès est hors champs des présentes
spécifications et doit être appliquée par les systèmes qui gèrent les
notifications en fonction de leurs politiques de sécurité.</p>

<p>La Table 3 contient la mise en correspondance des informations métier
contenues dans ce flux avec les ressources FHIR correspondantes.</p>

<table style="width:100%;">
<caption><p>Tableau 3 Mise en correspondance pour le flux 1:
Souscription Abonnement</p></caption>
<colgroup>
<col style="width: 22%" />
<col style="width: 25%" />
<col style="width: 15%" />
<col style="width: 36%" />
</colgroup>
<thead>
<tr>
<th colspan="2"> Eléments métier</th>
<th colspan="2">Eléments FHIR</th>
</tr>
<tr>
<th>Nom Objet</th>
<th>Nom attribut</th>
<th>Ressource</th>
<th>Elément</th>
</tr>
</thead>
<tbody>
<tr>
<td rowspan="5">Abonnement</td>
<td>idAbonnement : [0..1] Identifiant</td>
<td><strong>Subscription</strong></td>
<td>id : id [0..1]</td>
</tr>
<tr>
<td>mediaDiffusion : [1..1] Code</td>
<td><strong>Subscription</strong></td>
<td><p>channel.type [1..1] code</p>
<p>channel.endpoint [0..1] url</p></td>
</tr>
<tr>
<td>validiteDebut : [1..1] DateHeure</td>
<td><strong>Subscription</strong></td>
<td><em>Extension (Start)</em></td>
</tr>
<tr>
<td>validiteFin : [1..1] DateHeure</td>
<td><strong>Subscription</strong></td>
<td>end [0..1] instant</td>
</tr>
<tr>
<td>dateDemande : [0..1] DateHeure</td>
<td><strong>Subscription</strong></td>
<td><em>Extension (SubscriptionDate)</em></td>
</tr>
<tr>
<td>Evènement</td>
<td>typeEvenement : [1..1] Code</td>
<td><strong>Subscription</strong></td>
<td><p><em>Extension (EventType)</em></p>
<p>CodeableConcept</p>
<p>JDV_J46-TypeEvenementNotification-CI-SIS</p></td>
</tr>
<tr>
<td>Abonné</td>
<td>idAbonne : [1..1] Identifiant</td>
<td><strong>Subscription</strong></td>
<td><p><em>Extension (Subscriber)</em></p>
<p>Reference (Patient ou Practitioner ou Organization ou
RelatedPerson)</p></td>
</tr>
<tr>
<td rowspan="3">PersonnePriseEnCharge</td>
<td>idPersonnePriseEnCharge : [0..1] Identifiant</td>
<td><p><strong>Patient</strong></p>
<p><em>FrPatient</em></p></td>
<td>identifier : Identifier [0..*]</td>
</tr>
<tr>
<td>adresse : [0..*] Adresse</td>
<td><p><strong>Patient</strong></p>
<p><em>FrPatient</em></p></td>
<td>address : FrAddress [0..*]</td>
</tr>
<tr>
<td>telecommunication : [0..*] Telecommunication</td>
<td><p><strong>Patient</strong></p>
<p><em>FrPatient</em></p></td>
<td>telecom : FrContactPoint [0..*]</td>
</tr>
<tr>
<td rowspan="2">PersonnePhysique</td>
<td>nomFamille : [0..1] Texte</td>
<td><p><strong>Patient</strong></p>
<p><em>FrPatient</em></p></td>
<td><p>name[1..*].family : string [0..1] (FrHumanName)</p>
<p>Slice « usualName », Patient.name.use prenant la valeur « usual
»</p></td>
</tr>
<tr>
<td>prenomUsuel: [0..1] Texte</td>
<td><p><strong>Patient</strong></p>
<p><em>FrPatient</em></p></td>
<td><p>name[1..*].given : string [0..*] (FrHumanName)</p>
<p>Slice « usualName », Patient.name.use prenant la valeur « usual
»</p></td>
</tr>
<tr>
<td>Emetteur</td>
<td>idEmetteur : [1..1] Identifiant</td>
<td><strong>Subscription</strong></td>
<td><p><em>Extension (Declarant)</em></p>
<p>Reference (Practitioner ou Organization)</p></td>
</tr>
<tr>
<td rowspan="3">Professionnel</td>
<td>idPP : [0..1] Identifiant</td>
<td><p><strong>Practitioner</strong></p>
<p><em>FrPractitioner</em></p></td>
<td>identifier : Identifier [0..*]</td>
</tr>
<tr>
<td>telecommunication : [0..*] Telecommunication</td>
<td><p><strong>Practitioner</strong></p>
<p><em>FrPractitioner</em></p></td>
<td>telecom : FrContactPoint [0..*]</td>
</tr>
<tr>
<td>adresse : [0..*] Adresse</td>
<td><p><strong>Practitioner</strong></p>
<p><em>FrPractitioner</em></p></td>
<td>address : FrAddress [0..*]</td>
</tr>
<tr>
<td rowspan="2">PersonnePhysique</td>
<td>nomFamille : [0..1] Texte</td>
<td><p><strong>Practitioner</strong></p>
<p><em>FrPractitioner</em></p></td>
<td>name[0..*].family : string [0..1] (FrHumanName)</td>
</tr>
<tr>
<td>prenomUsuel: [0..1] Texte</td>
<td><p><strong>Practitioner</strong></p>
<p><em>FrPractitioner</em></p></td>
<td>name[0..*].family : string [0..1] (FrHumanName)</td>
</tr>
<tr>
<td rowspan="4">AbonnePP</td>
<td>idAbonnePP : [0..1] Identifiant</td>
<td rowspan="4"><p><strong>Practitioner</strong></p>
<p><em>FrPractitioner</em></p>
<p>Ou</p>
<p><strong>Patient</strong></p>
<p><em>FrPatient</em></p>
<p>Ou</p>
<p><strong>RelatedPerson</strong></p>
<p><em>FrRelatedPerson</em></p></td>
<td>identifier : Identifier [0..*]<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></td>
</tr>
<tr>
<td>telecommunication : [1..*] Telecommunication</td>
<td>telecom : FrContactPoint [0..*]</td>
</tr>
<tr>
<td>addresse : [0..*] Addresse</td>
<td>address : FrAddress [0..*]</td>
</tr>
<tr>
<td>TypeAbonnePP : [0..1] Type</td>
<td>Pas de mise en correspondance pour cet attribut qui, d’un point de
vue métier, permet d’identifier le type d’abonné. On retrouve cette
information au niveau du type de la ressource qui représente
l’abonné.</td>
</tr>
<tr>
<td rowspan="2">PersonnePhysique</td>
<td>nomFamille : [0..1] Texte</td>
<td rowspan="2"><p><strong>Practitioner</strong></p>
<p><em>FrPractitioner</em></p>
<p>Ou</p>
<p><strong>Patient</strong></p>
<p><em>FrPatient</em></p>
<p>Ou</p>
<p><strong>RelatedPerson</strong></p>
<p><em>FrRelatedPerson</em></p></td>
<td>name.family : string [0..1]</td>
</tr>
<tr>
<td>prenomUsuel : [0..1] Texte</td>
<td>name.given : string [0..1]</td>
</tr>
<tr>
<td rowspan="5">AbonnePM</td>
<td>identifiantAbonnePM : [0..1] Identifiant</td>
<td><p><strong>Organization</strong></p>
<p><em>FrOrganization</em></p></td>
<td>identifier : Identifier [0..*]</td>
</tr>
<tr>
<td>addresse : [0..*] Addresse</td>
<td><p><strong>Organization</strong></p>
<p><em>FrOrganization</em></p></td>
<td>address : FrAddress [0..*]</td>
</tr>
<tr>
<td>telecommunication: [1..*] telecommunication</td>
<td><p><strong>Organization</strong></p>
<p><em>FrOrganization</em></p></td>
<td>telecom : FrContactPoint [0..*]</td>
</tr>
<tr>
<td>nom : [0..1] Texte</td>
<td><p><strong>Organization</strong></p>
<p><em>FrOrganization</em></p></td>
<td>name : string [0..1]</td>
</tr>
<tr>
<td>typeAbonnePM : [0..1] Code</td>
<td><p><strong>Organization</strong></p>
<p><em>FrOrganization</em></p></td>
<td><p>type : CodeableConcept [0..*]</p>
<p>Slice : organizationType : CodeableConcept [0..1]</p></td>
</tr>
<tr>
<td rowspan="4">EntiteJuridique</td>
<td>numFINESS : [0..1] Identifiant</td>
<td><p><strong>Organization</strong></p>
<p><em>FrOrganization</em></p></td>
<td>identifier : Identifier [0..*]</td>
</tr>
<tr>
<td>addresseEJ : [0..*] Addresse</td>
<td><p><strong>Organization</strong></p>
<p><em>FrOrganization</em></p></td>
<td>address : FrAddress [0..*]</td>
</tr>
<tr>
<td>telecommunication: [0..*] telecommunication</td>
<td><p><strong>Organization</strong></p>
<p><em>FrOrganization</em></p></td>
<td>telecom : FrContactPoint [0..*]</td>
</tr>
<tr>
<td>raisonSociale : [0..1] Texte</td>
<td><p><strong>Organization</strong></p>
<p><em>FrOrganization</em></p></td>
<td>name : string [0..1]</td>
</tr>
</tbody>
</table>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr />
<ol>
<li id="fn1"><p>Sauf pour FrRelatedPerson : identifier : Identifier
[1..1]<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

<h3 id="contenu-fhir-des-flux-structurés">Contenu FHIR des flux structurés</h3>

<h3 id="ressource-subscription">Ressource « Subscription »</h3>

<p>La ressource FHIR <strong>Subscription</strong>[^7] est utilisée pour définir un
abonnement qui peut être hébergé dans un système d’information agissant
comme un gestionnaire d’abonnements.</p>

<p>Dans le contexte de la notification d’évènements, cette ressource est
utilisée pour mettre en œuvre le Flux 1[^8]-SouscriptionAbonnement.</p>

<p>Cette spécification technique introduit un nouveau profil pour la
ressource Subscription : NdE_SubscriptionNdE.</p>

<table>
<caption><p>Tableau 7 Liste des attributs de la ressource
Subscription</p></caption>
<colgroup>
<col style="width: 20%" />
<col style="width: 26%" />
<col style="width: 24%" />
<col style="width: 28%" />
</colgroup>
<thead>
<tr>
<th>Eléments</th>
<th>Type et cardinalité</th>
<th>Contraintes</th>
<th>Commentaire</th>
</tr>
</thead>
<tbody>
<tr>
<td>contained</td>
<td>Resource [0..*]</td>
<td><p>Cardinalité contrainte à [1..*]</p>
<p>Type de ressource limitée à Patient, Practitioner, Organization,
RelatedPerson</p></td>
<td>Les ressources référencées par les attributs de la ressource
Subscription doivent être présentes dans cet élément.</td>
</tr>
<tr>
<td><em>NdE_SubscriptionDate</em></td>
<td><p>Extension du volet NdE</p>
<p>dateTime [0..1]</p></td>
<td></td>
<td><p>Représente la date de création de l’abonnement</p>
<p>La date de création d’un abonnement peut ne pas circuler dans le flux
d’échange qui concerne la création d’un abonnement et peut être
automatiquement générée par le système une fois que la demande est
reçue.</p></td>
</tr>
<tr>
<td><em>NdE_Start</em></td>
<td><p>Extension du volet NdE</p>
<p>dateTime [1..1]</p></td>
<td></td>
<td><p>Cette information identifie la date de début de validité d’un
abonnement</p>
<p>Start et SubscriptionDate peuvent contenir la même date, mais pas
nécessairement.</p></td>
</tr>
<tr>
<td><em>NdE_Subject</em></td>
<td><p>Extension du volet NdE</p>
<p>Reference (FrPatient) [1..1]</p></td>
<td></td>
<td><p>Référence au profil français de la ressource Patient contenant
les informations relatives à la personne prise en charge (ou au
patient)</p>
<p>La ressource référencée doit être présente sous l’élément
Subscription.contained</p></td>
</tr>
<tr>
<td><em>NdE_Declarant</em></td>
<td><p>Extension du volet NdE</p>
<p>Reference (FrPractitioner|FrOrganization) [1..1]</p></td>
<td></td>
<td><p>Référence aux profils français des ressources qui identifient
l’émetteur de l’évènement (Practitioner pour un professionnel,
Organization pour un établissement)</p>
<p>La ressource référencée doit être présente sous l’élément
Subscription.contained</p></td>
</tr>
<tr>
<td><em>NdE_EventType</em></td>
<td><p>Extension du volet NdE</p>
<p>CodeableConcept [1..1]</p></td>
<td></td>
<td><p>Cette information identifie le type d’évènement qui est lié à un
abonnement particulier (i.e : dépôt de document, sortie d’hôpital,
etc.).</p>
<p>Nomenclature à utiliser :
JDV_J46-TypeEvenementNotification-CI-SIS</p></td>
</tr>
<tr>
<td><em>NdE_Subscriber</em></td>
<td><p>Extension du volet NdE</p>
<p>Reference (FrPractitioner| FrOrganization | FrPatient |
FrRelatedPerson) [1..1]</p></td>
<td></td>
<td><p>Cette information identifie la personne ou l’entité qui est
censée recevoir les notifications.</p>
<p>La ressource référencée doit être présente sous l’élément
Subscription.contained</p></td>
</tr>
<tr>
<td>id<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></td>
<td>identifier [0..1]</td>
<td>Cet identifiant doit être présent dans le flux de mise à jour de
l’abonnement.</td>
<td>Identifiant de l’abonnement</td>
</tr>
<tr>
<td>status</td>
<td>code [1..1]</td>
<td></td>
<td><p>Statut de l’abonnement</p>
<p>http://hl7.org/fhir/valueset-subscription-status.html</p></td>
</tr>
<tr>
<td>contact</td>
<td>ContactPoint [0..*]</td>
<td></td>
<td>Coordonnées de la source</td>
</tr>
<tr>
<td>reason</td>
<td>String [1..1]</td>
<td></td>
<td>La raison de la création de l’abonnement</td>
</tr>
<tr>
<td>criteria<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a></td>
<td>String [1..1]</td>
<td></td>
<td><p>Cet élément n’est pas défini dans l’étude métier. Cependant,
c’est un élément obligatoire dans le standard FHIR.</p>
<p>Il doit contenir une requête de recherche sur un type de ressource
géré par le gestionnaire d’abonnements. Dans le cas présent, il s’agit
d’une recherche sur la ressource CommunicationRequest, représentant les
déclarations d’évènements reçues par le gestionnaire d’abonnements, avec
comme paramètres de recherche le type d’évènement<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a> et
l’identifiant du patient sujet de l’évènement</p></td>
</tr>
<tr>
<td>end</td>
<td>Instant [0..1]</td>
<td></td>
<td>Date et heure de fin de l’abonnement</td>
</tr>
<tr>
<td>error</td>
<td>string [0..1]</td>
<td></td>
<td>La dernière erreur survenue à l’envoie d’une notification</td>
</tr>
<tr>
<td>Channel.type<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a></td>
<td>code [1..1]</td>
<td></td>
<td>Type du media<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a> de diffusion</td>
</tr>
<tr>
<td>Channel.endpoint</td>
<td>url [0..1]</td>
<td></td>
<td>Il s’agit du endpoint à utiliser pour envoyer les notifications</td>
</tr>
<tr>
<td>Channel.payload</td>
<td>code [0..1]</td>
<td></td>
<td>MIME type à envoyer ou à omettre s’il y a pas de payload</td>
</tr>
<tr>
<td>Channel.header</td>
<td>string [0..*]</td>
<td></td>
<td>Dépend du type de channel</td>
</tr>
</tbody>
</table>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr />
<ol>
<li id="fn1"><p>Cet identifiant permet de référencer la ressource au
sein du ou des système(s) d’information l’hébergeant, il peut être
utilisé par les clients pour les suppressions, mises à jour…<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>Exemple de recherche pour un évènement de type « dépôt
de document » pour un patient dont l’identifiant est connu :
CommunicationRequest?subject.identifier=urn:oid:1.2.3.4.5|PATID12334&amp;event-type=https://mos.esante.gouv.fr/NOS/TRE_R254-TypeEvenement/FHIR/TRE-R254-TypeEvenement|DOC<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>Ce paramètre de recherche référence une extension, un
nouveau paramètre de recherche pour la ressource CommunicationRequest
est défini au niveau de la section 2.2.6.1.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>https://www.hl7.org/fhir/valueset-subscription-channel-type.html<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>Un média de notification est le canal par lequel la
notification est envoyée à l’abonné (ex. sms, mail, pop-up dans une
application…)<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

<p>Cette spécification technique introduit plusieurs extensions applicables
à la ressource FHIR et décrites dans le tableau ci-dessous.</p>

<table>
<caption><p>Tableau 8 Liste des extensions applicables à la ressource
Subscription</p></caption>
<colgroup>
<col style="width: 22%" />
<col style="width: 12%" />
<col style="width: 26%" />
<col style="width: 38%" />
</colgroup>
<thead>
<tr>
<th>Nom</th>
<th>Cardinalité</th>
<th>Type</th>
<th>Description et contraintes</th>
</tr>
</thead>
<tbody>
<tr>
<td>NdE_SubscriptionDate</td>
<td>[0..1]</td>
<td>dateTime</td>
<td><p>Id : subscription-date</p>
<p>url :
http://esante.gouv.fr/ci-sis/fhir/StructureDefinition/SubscriptionDate</p>
<p>Représente la date de création de l’abonnement</p>
<p>La date de création d’un abonnement peut ne pas circuler dans le flux
d’échange qui concerne la création d’un abonnement et peut être
automatiquement générée par le système une fois que la demande est
reçue.</p></td>
</tr>
<tr>
<td>NdE_Start</td>
<td>[1..1]</td>
<td>dateTime</td>
<td><p>id : start</p>
<p>url : http://esante.gouv.fr/ci-sis/fhir/StructureDefinition/Start</p>
<p>Cette information identifie la date de début de validité d’un
abonnement</p>
<p>Start et SubscriptionDate peuvent contenir la même date, mais pas
nécessairement.</p></td>
</tr>
<tr>
<td>NdE_Subject</td>
<td>[1..1]</td>
<td>Reference (FrPatient)</td>
<td><p>id : subject</p>
<p>url :
http://esante.gouv.fr/ci-sis/fhir/StructureDefinition/Subject</p>
<p>Référence au profil français de la ressource Patient contenant les
informations relatives à la personne prise en charge (ou au patient)</p>
<p>La ressource référencée doit être présente sous l’élément
Subscription.contained</p></td>
</tr>
<tr>
<td>NdE_Declarant</td>
<td>[1..1]</td>
<td>Reference (FrPractitioner|FrOrganization)</td>
<td><p>id : declarant</p>
<p>url :
http://esante.gouv.fr/ci-sis/fhir/StructureDefinition/Declarant</p>
<p>Référence aux profils français des ressources qui identifient
l’émetteur de l’évènement (Practitioner pour un professionnel,
Organization pour un établissement)</p>
<p>La ressource référencée doit être présente sous l’élément
Subscription.contained</p></td>
</tr>
<tr>
<td>NdE_EventType</td>
<td>[1..1]</td>
<td>CodeableConcept</td>
<td><p>id : event-type</p>
<p>url :
http://esante.gouv.fr/ci-sis/fhir/StructureDefinition/EventType</p>
<p>Cette information identifie le type d’évènement qui est lié à un
abonnement particulier (i.e : dépôt de document, sortie d’hôpital,
etc.).</p>
<p>Nomenclature à utiliser :
JDV_J46-TypeEvenementNotification-CI-SIS</p></td>
</tr>
<tr>
<td>NdE_Subscriber</td>
<td>[1..1]</td>
<td>Reference (FrPractitioner| FrOrganization | FrPatient |
FrRelatedPerson)</td>
<td><p>id : subscriber</p>
<p>url :
http://esante.gouv.fr/ci-sis/fhir/StructureDefinition/Subscriber</p>
<p>Cette information identifie la personne ou l’entité qui est censée
recevoir les notifications.</p>
<p>La ressource référencée doit être présente sous l’élément
Subscription.contained</p></td>
</tr>
</tbody>
</table>

<h3 id="construction-des-flux">Construction des flux</h3>

<p><strong>Flux 1 – SouscriptionAbonnement</strong> contient les informations relatives à la souscription d’un
abonnement pour un type d’évènement déterminé ou la mise à jour de
celui-ci.</p>

<p>La première étape de la construction du flux 1 de souscription d’un
abonnement consiste à organiser son contenu. Le corps de la requête HTTP
est constitué de la ressource « Subscription » contenant les ressources
suivantes (utilisation de l’élément <strong>contained</strong>):</p>

<p>La ressource référencée comme personne prise en charge par l’extension
Subject : la ressource « Patient » utilisant le profil français
FrPatient ;</p>

<p>La ressource référencée en tant qu’émetteur de l’évènement par
l’extension Declarant : la ressource « Practitioner » utilisant le
profil français FrPractitioner ou « Organization » utilisant le profil
français FrOrganization</p>

<p>La ressource référencée en tant qu’abonné par l’extension Subscriber:</p>

<p>La ressource « RelatedPerson » utilisant le profil français
FrRelatedPerson si l’abonné n’est ni la personne prise en charge, ni
l’émetteur de l’évènement</p>

<p>La ressource « Organization » utilisant le profil français
FrOrganization ou « Practitioner » utilisant le profil français
FrPractitioner si l’abonné est différent de l’émetteur</p>

<p>Aucune si l’abonné est le patient ou l’émetteur lui-même</p>

<p>Pour la création d’un nouvel abonnement, la ressource Subscription ainsi
formée sera envoyée dans le corps de la requête HTTP POST suivante :</p>

<p>POST [base]/Subscription</p>

<p>Où [base] est l’endpoint FHIR mis à disposition par le gestionnaire
d’abonnements.</p>

<p>Si la souscription à l’abonnement est correctement effectuée, le système
Gestionnaire d’abonnements doit retourner un code « 201 created » avec,
dans le corps de la réponse, la ressource « Subscription » nouvellement
créée avec l’élément id peuplé.</p>

<p>Dans le cas d’une mise à jour, l’opération PUT est utilisée. La
ressource Subscription telle que définie ci-dessus sera envoyée dans le
corps de la requête HTTP PUT suivante :</p>

<p>PUT [base]/Subscription/[id]</p>

<p>Où [base] est l’endpoint FHIR mis à disposition par le gestionnaire
d’abonnements et [id] correspond à l’élément id de la ressource
incluse dans le corps de la requête.</p>

<p>Si la mise à jour de l’abonnement est correctement effectuée, le système
Gestionnaire d’abonnement doit retourner un code « 200 OK », avec dans
le corps de la réponse, la ressource « Subscription » mise à jour.</p>

<p>Pour la création comme pour la mise à jour, en cas d’erreur, le
Gestionnaire d’abonnements doit répondre avec les codes HTTP appropriés
tels que définis par l’API REST FHIR et renvoyer une ressource de type
OperationOutcome dans le corps de la réponse.</p>




</div>
        </div>  <!-- /inner-wrapper -->
      </div>  <!-- /row -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-content -->

  <script type="text/javascript" src="assets/js/jquery.js"> </script>     <!-- note keep space here, otherwise it will be transformed to empty tag -> fails -->
  <script type="text/javascript" src="assets/js/jquery-ui.min.js"> </script>

<script type="text/javascript" src="assets/js/window-hash.js"> </script>
  <a name="bottom"> </a>
  <div id="segment-footer" igtool="footer" class="segment">  <!-- segment-footer -->
    <div class="container">  <!-- container -->

      <div style="background-color:var(--footer-nav-bg-color)">
        <table style="width:100%">
          <tbody>
            <tr>
              <td style="text-align:left">&#xA0;

                <a href="st_intro.html">&lt;prev</a>

              </td>
              <td style="text-align:center">
                <a href="#top">top</a>
              </td>
              <td style="text-align:right">&#xA0;

                <a href="st_flux2.html">next&gt;</a>

              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="inner-wrapper">
        <p>
          IG &#169; 2020+ <a style="color:var(--footer-hyperlink-text-color)" href="https://esante.gouv.fr">Agence du Numérique en Santé (ANS) - 2-10 Rue d&#39;Oradour-sur-Glane, 75015 Paris</a>.  Package ans.fhir.fr.[code]#0.1.0 based on <a style="color: var(--footer-hyperlink-text-color)" href="http://hl7.org/fhir/R4/">FHIR 4.0.1</a>. Generated <span title="Fri, Dec 12, 2025 08:49+0000">2025-12-12</span>
          <br/>
          <span style="color: var(--footer-highlight-text-color)"></span>
            Liens : <a style="color: var(--footer-hyperlink-text-color)" href="toc.html">Table des matières</a> |
<a style="color: var(--footer-hyperlink-text-color)" href="qa.html">QA</a> |
<a style="color: var(--footer-hyperlink-text-color)" target="_blank" href="https://interop.esante.gouv.fr/ig/fhir/[code]/history.html">Historique des versions</a>
<a style="color: var(--footer-hyperlink-text-color)" target="_blank" href="https://interop.esante.gouv.fr/ig/documentation">Documentation</a>
 | <a style="color: var(--footer-hyperlink-text-color)" target="_blank" href="https://github.com/ansforge/FIG_ans-ig-sample/issues/new">New Issue</a>

          </span>
        </p>
      </div>  <!-- /inner-wrapper -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-footer -->
  
  <div id="segment-post-footer" class="segment hidden">  <!-- segment-post-footer -->
    <div class="container">  <!-- container -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-post-footer -->
  
  <!-- JS and analytics only. -->
  <!-- Bootstrap core JavaScript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
  <script type="text/javascript" src="assets/js/bootstrap.min.js"> </script>
  <script type="text/javascript" src="assets/js/respond.min.js"> </script>
  <script type="text/javascript" src="assets/js/anchor.min.js"> </script>
  <script type="text/javascript" src="assets/js/clipboard.min.js"> </script>
  <script type="text/javascript" src="assets/js/clipboard-btn.js"> </script>

  <!-- Ajout ANS -->
  <script src="assets/js/app.js" type="text/javascript"> </script>
  <script src="assets/js/vendor.js" type="text/javascript"> </script>
  <!-- Fin ajout ANS -->

  <script type="text/javascript" src="assets/js/anchor-hover.js"> </script>
  

  <!-- Analytics Below
  ================================================== -->


  <!-- AJOUT ANS -->

<footer class="footer footer-principal" role="contentinfo">
  <div class="footer__region1">
    <div class="container">
      <div class="row">

        <div class="col-md-6 col-lg-4 text-center text-md-left">
          <div class="logos">        
            <div class="logo logo--0">
              <a href="https://solidarites-sante.gouv.fr" title="Ministère des Solidarités et de la Santé (nouvelle fenêtre)" target="_blank" rel="nofollow">
                
                <img src="assets/images/logo-ministere.svg" alt="Ministère des Solidarités et de la Santé" width="133" height="77" loading="lazy" />
                
              </a>
            </div>
        
            <div class="logo logo--1">
              <a href="https://esante.gouv.fr/" title="Agence du numérique en santé (nouvelle fenêtre)" target="_blank" rel="nofollow">
                
                <img src="assets/images/logo-ANS-footer.svg" alt="Agence du numérique en santé" width="106" height="74" loading="lazy" />
              </a>
            </div>
          </div>
        </div>
        
        <div class="col-md-6 col-lg-4 text-center text-md-left">
          <p class="footer__title">Agence du Numérique en Santé</p>
          <p>2-10 Rue d'Oradour-sur-Glane 75015 Paris</p>

          <!-- <div class="m-social">
            <ul class="m-social__list">        
              <li class="m-social__item">
                <a class="m-social__link" href="https://www.linkedin.com/company/agence-du-numerique-en-sante/" target="_blank" rel="nofollow">
                  <div class="m-social__icon">
                    <svg class="svg-icon svg-linkedin" aria-hidden="true" focusable="false"><use href="assets/images/icon-sprite.svg#linkedin"></use></svg>
                  </div>
                  <span class="sr-only">linkedin</span>
                </a>
              </li>
              <li class="m-social__item">
                <a class="m-social__link" href="https://twitter.com/esante_gouv_fr" target="_blank" rel="nofollow">
                  <div class="m-social__icon">
                    <svg class="svg-icon svg-twitter" aria-hidden="true" focusable="false"><use href="assets/images/icon-sprite.svg#twitter"></use></svg>
                  </div>
                  <span class="sr-only">twitter</span>
                </a>
              </li>
              <li class="m-social__item">
                <a class="m-social__link" href="https://www.youtube.com/channel/UCd1zuSaU5cE1lRCpwv_HSMA" target="_blank" rel="nofollow">
                  <div class="m-social__icon">
                    <svg class="svg-icon svg-youtube" aria-hidden="true" focusable="false"><use href="assets/images/icon-sprite.svg#youtube"></use></svg>
                  </div>
                  <span class="sr-only">youtube</span>
                </a>
              </li>
              <li class="m-social__item">
                <a class="m-social__link" href="https://esante.gouv.fr/rss.xml" target="_blank" rel="nofollow">
                  <div class="m-social__icon">
                    <svg class="svg-icon svg-rss" aria-hidden="true" focusable="false"><use href="assets/images/icon-sprite.svg#rss"></use></svg>
                  </div>
                  <span class="sr-only">rss</span>
                </a>
              </li>
            </ul>
          </div> -->
        </div>
        
        <div class="col-6 col-lg-4">
          <ul class="footer-list">
            <li class="footer-list__item footer-list__item--hasIcon">
              <a href="mailto:ci-sis@esante.gouv.fr" class="mailto-link">
                <svg class="svg-icon svg-angle-right" aria-hidden="true" focusable="false"><use href="assets/images/icon-sprite.svg#angle-right"></use></svg>Contact</a>
              </li>
              <!-- <li class="footer-list__item">
                <a href="https://interop-pprod.esante.gouv.fr/ci-sis-specifications/wp-content/uploads/CGU_espace_de_tests_v1.1.pdf" class="file-link">Mentions légales</a>
              </li>
               -->
            </ul>
          </div>

        </div>
      </div>
    </div>
    
    <!-- <div class="footer__region2">
      <div class="container">
        <div class="footer-contentinfo">
          <ul class="footer-list footer-list--inline">

          </ul>
        </div>
      </div>
    </div> -->
  </footer>
  </body>
</html>

